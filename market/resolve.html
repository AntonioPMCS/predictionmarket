<!DOCTYPE html>
<html lang="en" data-is-home="false" data-is-mobile="false" data-supports-vr="false" data-supports-touch="false">

<head>
  <title>PreSaga Dapp</title>
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="../index.css">
</head>

<body class='container'>

  <section class="header">
    <div class="headerTitle">
      <h1 style="padding-left:0.5em;"> PreSaga BETA</h1>
      <div id='connectionBar'>
      </div>
      <nav class="navbar navbar-expand-md navbar-light">
        <div id="navbar" class="navbar-nav">
          <script language="javascript" type="text/javascript" src="../navbar.js"></script>
        </div>
      </nav>
    </div>
  </section>
  
  <section class=''>
    <div class="Instructions">
      <h2>Resolve Market</h2>
      <p>
        Resolving a market translates into the operation of "Reporting payouts".
        A payout is an integer value given to each outcome (a weight). 
        A market can have several outcomes with 1 as a payout. 
        This means more than 1 option is true in the end. At least one outcome must have a payout of 1.
        In its simplest form: If it is 0, the outcome is false. If it is 1, the outcome is true.</p>
      <p>
        However, this number is actually used to calculate the proportion of the reward attributed to each outcome. For example:
        <ul>
        <li>If payout[A] = 1 and payout[B] = 0 then holders of outcome A get all of the reward and B gets 0.</li>
        <li>If payout[A] = 1 and payout[B] = 1 the reward is distributed fifty-fifty.</li>
        <li>If payout[A] = 1 and payout[B] = 2 then B gets double the reward as A. So B gets 2/3 and A gets 1/3.</li>
        </ul>
      </p>
      <p>
        A payout report will only be accepted by the Conditional Tokens Contract if the signer of the transaction is the 
        address passed as "oracle" upon market creation. Otherwise, the transaction will revert.
      </p>
    </div>
    <div class="contract-panel">
      <h3 id="resolveMarketTitle"></h3>
        <p class="panel-label">Title</p>
        <p id="marketTitle"></p>
        <p class="panel-label">ConditionId</p>
        <p id="marketConditionId"></p>
        <p class="panel-label">Oracle</p>
        <p id="marketOracle"></p>
        
        <label for="MarketPayoutYes">Payout Yes:</label><br>
        <input type="number" id="resolveYesPayout" name="ResolveYesPayout" min="0" max="100"><br>
        <label for="MarketPayoutNo">Payout No:</label><br>
        <input type="number" id="resolveNoPayout" name="ResolveNoPayout" min="0" max="100"><br>
      
        <a href='javascript:;' onclick="_resolveMarket()" class="btn btn-primary">Resolve Market</a>
    </div>
  </section>      
</body>


<!--Import web3, jquery and our app-->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/fpmmfactory_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/conditionaltokens_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/collateraltoken_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/fpmm_abi.js"></script>
<script language="javascript" type="text/javascript" src="../Session.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/conditionalTokens.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/Contract.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/MarketMakerFactory.js"></script>
<script language="javascript" type="text/javascript" src="../constants.js"></script>
<script language="javascript" type="text/javascript" src="../db/DB.js"></script>
<script language="javascript" type="text/javascript" src="../node_modules/big.js/big.js"></script>
<script language="javascript" type="text/javascript" src="../math/bignumber.min.js"></script>
<script language="javascript" type="text/javascript" src="../math/newton-raphson-method.js"></script>
<script src="./resolveMarket.js"></script> 
<script language="javascript" type="text/javascript" src="../connectionBar.js"></script>

</html>