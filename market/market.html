<!DOCTYPE html>
<html lang="en" data-is-home="false" data-is-mobile="false" data-supports-vr="false" data-supports-touch="false">

<head>
  <title>PreSaga Dapp</title>
  <link rel="shortcut icon" href="../UN_icon.jpg" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="../index.css">
</head>

<body class='container'>

  <section class="header">
    <div class="headerTitle">
      <h1 style="padding-left:0.5em;"> PreSaga BETA</h1>
      <div class='connection'>
        <a id ="connectBtn" href='#' onclick="_loadTestCondition()" class="btn btn-primary">connect</a>
        <span id="connectedNetwork">Network</span>
        <span id="connectedAddress">Address</span>
      </div>
      <nav class="navbar navbar-expand-md navbar-light">
        <div id="navbar" class="navbar-nav">
          <script language="javascript" type="text/javascript" src="../navbar.js"></script>
        </div>
      </nav>
    </div>
  </section>
  
  <section class='content'>

    <div class='mainContent'>
      <div class='market-panel'>
        <h4>MARKET INFO</h4>
        <div class='market-info'>
          <p class="panel-label">Condition ID</p>
          <p id="marketConditionId">Loading...</p>
          <p class="panel-label">Associated FPMM</p>
          <p id="marketFPMM">Loading...</p>
          <div class="outcome-values">
            <div class="outcome-values-outcome">
            <p class="panel-label">Total Supply (Liquidity):</p>
            <p id="marketPanelLiquidity">Loading...</p>
            </div>
            <div class="outcome-values-outcome">
              <p class="panel-label">YES SHARES: </p><p id="mmYesBalance">Loading...</p><p> @ </p><p id="marketPanelYesPrice">Loading...</p>
            </div>
            <div class="outcome-values-outcome">
              <p class="panel-label">NO SHARES: </p><p id="mmNoBalance">Loading...</p><p>@</p><p id="marketPanelNoPrice">Loading...</p>
            </div>
          </div>
        </div>
      </div>

      <div class='market-panel'>
        <div class="market-dashboard">
          <h4>MARKET DASHBOARD</h4>
          <h6 id="marketPanelAcc"><strong>Account: </strong></h6><br>
          <h6 id="marketPanelLPTokens"><strong>LP TOKENS: </strong></h6><br>
          <br>

          <h5>TRADE</h5>
          <div class="trade-panel">
            <div class="dashboard-section">
              <div class='trade'>
                <div class="trade-input">
                  <h6 id="YesSharesBalance"><strong>Yes Shares: </strong></h6><br>
                  <input id="BuyYesAmount" type="text" inputmode="decimal"
                  minlength="1" maxlength="79" placeholder="Investment" value=0 onInput="_calcBuyAmount(this, YESINDEX)">UNT<br>
                  <span id="BuyYesEstimation">Will buy you 0 YES shares</span><br>
                  <input type="button" class="btn btn-primary" onclick="_buy(YESINDEX)" value="Buy YES">
                </div>
  
                <div class="trade-input">
                  <input id="SellYesShares" type="text" inputmode="decimal"
                  minlength="1" maxlength="79"  placeholder="Sell amount..." value=0 onInput="_calcSellCollateral(this, YESINDEX)"><a class="maxBtn" onclick="_getAccPosition(YESINDEX)" href="javascript:;">MAX</a> YES SHARES 
                  <input id="SellYesCollateral" type="text" inputmode="decimal"
                  minlength="1" maxlength="79"  placeholder="Sell amount..." value=0 onInput="_calcSellShares(this, YESINDEX)">UNT<br>
                  <input type="button" class="btn btn-primary" onclick="_sell(YESINDEX)" value="Sell YES">
                </div>
              </div>
  
              <div class='trade'>
                <div class="trade-input">
                  <h6 id="NoSharesBalance"><strong>No Shares: </strong></h6><br>
                  <input id="BuyNoAmount" type="text" inputmode="decimal" 
                  minlength="1" maxlength="79" placeholder="Amount..." value=0 onInput="_calcBuyAmount(this, NOINDEX)">UNT<br>
                  <span id="BuyNoEstimation">Will buy you 0 NO shares</span><br> 
                  <input type="button" class="btn btn-primary" onclick="_buy(NOINDEX)" value="Buy NO">
                </div>
  
                <div class="trade-input">
                  <input id="SellNoShares" type="text" inputmode="decimal"
                  minlength="1" maxlength="79"  placeholder="Shares amount..." value=0 onInput="_calcSellCollateral(this, NOINDEX)"><a class="maxBtn" onclick="_getAccPosition(NOINDEX)" href="javascript:;">MAX</a> NO SHARES
                  <input id="SellNoCollateral" type="text" inputmode="decimal"
                  minlength="1" maxlength="79"  placeholder="Collateral amount..." value=0 onInput="_calcSellShares(this, NOINDEX)">UNT<br>
                  <input type="button" class="btn btn-primary" onclick="_sell(NOINDEX)" value="Sell NO">
                </div>
              </div>
            </div>
          </div>
          <!-- Closes TRADE panel -->

          <h5>MANAGE LIQUIDITY</h5>
          <div class="trade-panel">
            <div class="dashboard-section">
              <div class="liquidity-input">
                <input id="AddLiquidityAmount" type="text" inputmode="decimal"
                minlength="1" maxlength="79"  placeholder="Collateral amount..." value=0>UNT<br>
                <input type="button" class="btn btn-primary" onclick="_addFunding()" value="Add Liquidity">
              </div>
              <div class="liquidity-input">
                <input id="RemoveLiquidityAmount" type="text" inputmode="decimal"
                minlength="1" maxlength="79"  placeholder="Shares amount..." value=0>SHARES
                <input type="button" class="btn btn-primary" onclick="_removeFunding()" value="Remove Liquidity">
              </div>
            </div>
          </div>
          <!-- Closes LIQUIDITY panel-->
          <h5>REDEEM POSITIONS</h5>
          <div class="trade-panel">
            <div class="dashboard-section">
              <div class="liquidity-input">
                <a href='javascript:;' onclick="_redeemPositions()" class="btn btn-primary">Redeem Positions</a>
                <p id="redeemedTotal">Redeemed Total: </p>
              </div>
            </div>
          </div>    
          <!-- Closes REDEEM panel-->    
        </div>
          
          </div>
      <div id='printer'>
        <p id="output"></p>
      </div>
      
    </div>

  </section>
        
</body>


<!--Import web3, jquery and our app-->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/fpmmfactory_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/conditionaltokens_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/collateraltoken_abi.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/abi/fpmm_abi.js"></script>
<script language="javascript" type="text/javascript" src="../Session.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/conditionalTokens.js"></script> -->
<script language="javascript" type="text/javascript" src="../blockchain/Contract.js"></script>
<script language="javascript" type="text/javascript" src="../blockchain/MarketMaker.js"></script>
<script language="javascript" type="text/javascript" src="../constants.js"></script>
<script language="javascript" type="text/javascript" src="../db/markets.js"></script>
<script language="javascript" type="text/javascript" src="../node_modules/big.js/big.js"></script>
<script language="javascript" type="text/javascript" src="../math/bignumber.min.js"></script>
<script language="javascript" type="text/javascript" src="../math/newton-raphson-method.js"></script>
<script src="./market.js"></script> 

</html>